import{r as c,T as N,c as w,a as r,u as s,w as n,F as S,o as k,Z as F,b as l,d as g,e as O,h as P,Q as M,O as K}from"./app-87e4b527.js";import{_ as j}from"./AuthenticatedLayout-cd5bbb9d.js";import{_ as E}from"./TableTanstack-92db18e5.js";import I from"./EditDeleteButton-156a65b6.js";import{R as T}from"./MazDialog-fdEu8dqH-79fc69b2.js";import{O as f}from"./MazBtn-DgGnjAgh-dfd0a08f.js";import{y as u}from"./MazInput-TEx7J5N7-e9b11969.js";import{v as U,p as A,a as B}from"./filepond-plugin-image-preview.esm-ee57de24.js";import{_ as p}from"./InputError-937ebae9.js";import"./ApplicationLogo-dfe0f8b3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-b5db98bd.js";const R=l("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Categories",-1),D={class:"py-12"},L={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},X={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg sm:relative"},q={class:"ms-4 sm:ms-6 lg:ms-8 mt-5 sm:absolute sm:top-0.5"},G={class:"pb-6"},H=["onSubmit"],Q={class:"grid grid-cols-3 gap-6"},Z={class:"col-span-3"},z={class:"col-span-3"},J={class:"col-span-3"},_=1,de={__name:"Index",props:{categories:{type:Object}},setup(v){const m=c(!1),i=c(!1),a=N({name_en:"",name_fr:"",name_de:"",images:[]}),y=U(B,A),b=[{accessorKey:"name_en",header:"Name (en)"},{accessorKey:"name_fr",header:"Name (fr)"},{accessorKey:"name_de",header:"Name (de)"},{accessorKey:"edit",header:"Actions",cell:({row:o})=>P(I,{id:o.original.id}),enableSorting:!1}],C=()=>{a.post(route("admin.categories.store",M().props.currentLocale),{preserveScroll:!0,preserveState:o=>Object.keys(o.props.errors).length})};function h(){a.reset(),a.clearErrors(),i.value=!1}function x(o){return a.images.push(o),o}function V(o,e,t){a.images=a.images.filter($=>$!==o),K.delete("/en/delete-tmp/"+o),e()}function d(o){i.value=o}return(o,e)=>(k(),w(S,null,[r(s(F),{title:"Category"}),r(j,null,{header:n(()=>[R]),default:n(()=>[l("div",D,[l("div",L,[l("div",X,[l("div",q,[r(s(f),{onClick:e[0]||(e[0]=t=>m.value=!0),outline:""},{default:n(()=>[g(" Create category ")]),_:1})]),l("div",G,[r(E,{data:v.categories,columns:b},null,8,["data"])])])])]),r(s(T),{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=t=>m.value=t),title:"Create category",width:"800px",maxHeight:"80vh",scrollable:"",onClose:e[8]||(e[8]=t=>h())},{default:n(()=>[l("form",{onSubmit:O(C,["prevent"]),class:"space-y-6"},[l("div",Q,[l("div",Z,[r(s(u),{modelValue:s(a).name_en,"onUpdate:modelValue":e[1]||(e[1]=t=>s(a).name_en=t),label:"Name (en)",class:"focus:ring-amber-600",required:""},null,8,["modelValue"]),r(p,{class:"mt-1",message:s(a).errors.name_en},null,8,["message"])]),l("div",z,[r(s(u),{modelValue:s(a).name_fr,"onUpdate:modelValue":e[2]||(e[2]=t=>s(a).name_fr=t),label:"Name (fr)",class:"focus:ring-amber-600"},null,8,["modelValue"]),r(p,{class:"mt-1",message:s(a).errors.name_fr},null,8,["message"])]),l("div",J,[r(s(u),{modelValue:s(a).name_de,"onUpdate:modelValue":e[3]||(e[3]=t=>s(a).name_de=t),label:"Name (de)",class:"focus:ring-amber-600"},null,8,["modelValue"]),r(p,{class:"mt-1",message:s(a).errors.name_de},null,8,["message"])])]),r(s(y),{name:"image",ref:"pond","label-idle":"Drop images here... Max: "+_,class:"cursor-pointer","allow-multiple":!0,maxFiles:_,required:!0,"accepted-file-types":"image/jpeg, image/png, image/jpg",onInitfile:e[4]||(e[4]=t=>d(!0)),onProcessfilestart:e[5]||(e[5]=t=>d(!0)),onProcessfiles:e[6]||(e[6]=t=>d(!1)),server:{url:"",process:{url:"/en/upload-tmp",method:"POST",onload:x},revert:V,headers:{"X-CSRF-TOKEN":o.$page.props.csrf_token}}},null,8,["label-idle","server"]),r(s(f),{type:"submit",disabled:s(a).processing||i.value||!s(a).isDirty,block:""},{default:n(()=>[g(" Save ")]),_:1},8,["disabled"])],40,H)]),_:1},8,["modelValue"])]),_:1})],64))}};export{de as default};
