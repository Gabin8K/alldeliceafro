import{Z as T}from"./MazTextarea-b76d04fa.js";import{D as q}from"./MazInputNumber-DSWPuRyf-80c0e0ff.js";import{r as m,T as X,c as V,b as n,a as s,w as r,u as l,F as S,o as h,d as p,f as z,g as R,j as Z,i as G,n as K,e as Q,O as x,Q as D}from"./app-87e4b527.js";import{R as L}from"./MazDialog-fdEu8dqH-79fc69b2.js";import{O as g}from"./MazBtn-DgGnjAgh-dfd0a08f.js";import{y as A}from"./MazInput-TEx7J5N7-e9b11969.js";import{v as W,p as J,a as Y}from"./filepond-plugin-image-preview.esm-ee57de24.js";import{_ as d}from"./InputError-937ebae9.js";import{X as ee}from"./MazSelect-qw3H2BrO-4eb8767a.js";const le={class:"flex items-center justify-end gap-x-2 md:gap-x-4"},te=n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1),oe=[te],ae=n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),se=[ae],ne=n("p",null," Are you sure you want to delete this article? ",-1),re=["onSubmit"],ie={class:"grid grid-cols-3 gap-6"},de={class:"col-span-3 md:col-span-1"},ue={class:"col-span-3 md:col-span-1"},me={class:"col-span-3 md:col-span-1"},ce={class:"grid grid-cols-2 gap-6"},pe={class:"col-span-2 md:col-span-1"},ge={class:"col-span-2 md:col-span-1"},ve={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},fe={class:"relative rounded-xl overflow-hidden hover:scale-105 transform transition duration-200 w-fit"},_e=["onClick"],we=n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-white"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),Ve=[we],he=["src"],ke=n("p",null," Are you sure you want to delete this image? ",-1),k=3,Ue={__name:"EditDeleteButton",props:{id:Number,categories:{type:Object}},setup(M){const b=M,v=m(!1),u=m([]),i=m(k),f=m(!1),_=m(null),w=m(!1),y=m(!1),e=X({category_id:null,name_en:"",name_fr:"",name_de:"",description_en:"",description_fr:"",description_de:"",weight:null,images:[]}),U=W(Y,J);function j(a){return e.images.push(a),a}function O(a,t,$){e.images=e.images.filter(c=>c!==a),x.delete("/en/delete-tmp/"+a),t()}function I(){axios.get("articles/"+b.id).then(a=>{e.category_id=a.data.category_id,e.name_en=a.data.name_en,e.name_fr=a.data.name_fr,e.name_de=a.data.name_de,e.description_en=a.data.description_en,e.description_fr=a.data.description_fr,e.description_de=a.data.description_de,e.weight=a.data.weight,u.value=a.data.images,i.value-=a.data.images.length,v.value=!0})}function N(){e.reset(),e.clearErrors(),u.value=[],i.value=k,y.value=!1}function E(a){_.value=a,f.value=!0}function F(){x.delete(route("delete.image",[D().props.currentLocale,_.value])),u.value=u.value.filter(a=>a.id!==_.value),i.value=k-u.value.length,f.value=!1}function P(){_.value=null}function B(){x.delete(route("admin.articles.destroy",[D().props.currentLocale,b.id]),{preserveScroll:!0,preserveState:a=>Object.keys(a.props.errors).length}),w.value=!1}function H(){e.patch(route("admin.articles.update",[D().props.currentLocale,b.id]),{preserveScroll:!0,preserveState:a=>Object.keys(a.props.errors).length,onSuccess:()=>v.value=!1})}function C(a){y.value=a}return(a,t)=>{const $=q,c=T;return h(),V(S,null,[n("div",le,[n("div",{onClick:t[0]||(t[0]=o=>I()),class:"hover:text-indigo-500 cursor-pointer"},oe),n("div",{onClick:t[1]||(t[1]=o=>w.value=!0),class:"hover:text-red-500 cursor-pointer"},se)]),s(l(L),{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=o=>w.value=o),title:"Delete article"},{footer:r(({close:o})=>[s(l(g),{onClick:o,color:"danger",class:"mr-2",outline:""},{default:r(()=>[p(" Cancel ")]),_:2},1032,["onClick"]),s(l(g),{onClick:B},{default:r(()=>[p(" Confirm ")]),_:1})]),default:r(()=>[ne]),_:1},8,["modelValue"]),s(l(L),{modelValue:v.value,"onUpdate:modelValue":t[16]||(t[16]=o=>v.value=o),title:"Edit article",width:"800px",maxHeight:"80vh",scrollable:"",onClose:t[17]||(t[17]=o=>N())},{default:r(()=>[n("form",{onSubmit:Q(H,["prevent"]),class:"space-y-6"},[n("div",ie,[n("div",de,[s(l(A),{modelValue:l(e).name_en,"onUpdate:modelValue":t[3]||(t[3]=o=>l(e).name_en=o),label:"Name (en)",required:""},null,8,["modelValue"]),s(d,{class:"mt-1",message:l(e).errors.name_en},null,8,["message"])]),n("div",ue,[s(l(A),{modelValue:l(e).name_fr,"onUpdate:modelValue":t[4]||(t[4]=o=>l(e).name_fr=o),label:"Name (fr)"},null,8,["modelValue"]),s(d,{class:"mt-1",message:l(e).errors.name_fr},null,8,["message"])]),n("div",me,[s(l(A),{modelValue:l(e).name_de,"onUpdate:modelValue":t[5]||(t[5]=o=>l(e).name_de=o),label:"Name (de)"},null,8,["modelValue"]),s(d,{class:"mt-1",message:l(e).errors.name_de},null,8,["message"])])]),n("div",ce,[n("div",pe,[s($,{modelValue:l(e).weight,"onUpdate:modelValue":t[6]||(t[6]=o=>l(e).weight=o),label:"Weight (g)",min:0,step:1,style:{width:"100%"},required:""},null,8,["modelValue"]),s(d,{class:"mt-1",message:l(e).errors.weight},null,8,["message"])]),n("div",ge,[s(l(ee),{label:"Select category",modelValue:l(e).category_id,"onUpdate:modelValue":t[7]||(t[7]=o=>l(e).category_id=o),options:M.categories,"option-value-key":"id","option-label-key":"name_"+a.$page.props.currentLocale,"option-input-value-key":"name_"+a.$page.props.currentLocale,search:"",required:""},null,8,["modelValue","options","option-label-key","option-input-value-key"]),s(d,{class:"mt-1",message:l(e).errors.category_id},null,8,["message"])])]),n("div",null,[s(c,{modelValue:l(e).description_en,"onUpdate:modelValue":t[8]||(t[8]=o=>l(e).description_en=o),label:"Description (en)"},null,8,["modelValue"]),s(d,{class:"mt-1",message:l(e).errors.description_en},null,8,["message"])]),n("div",null,[s(c,{modelValue:l(e).description_fr,"onUpdate:modelValue":t[9]||(t[9]=o=>l(e).description_fr=o),label:"Description (fr)"},null,8,["modelValue"]),s(d,{class:"mt-1",message:l(e).errors.description_fr},null,8,["message"])]),n("div",null,[s(c,{modelValue:l(e).description_de,"onUpdate:modelValue":t[10]||(t[10]=o=>l(e).description_de=o),label:"Description (de)"},null,8,["modelValue"]),s(d,{class:"mt-1",message:l(e).errors.description_de},null,8,["message"])]),u.value.length>0?(h(),V("div",ve,[(h(!0),V(S,null,z(u.value,o=>(h(),V("div",fe,[n("div",{onClick:be=>E(o.id),class:"absolute top-2 right-2 bg-red-500 rounded-full p-1 cursor-pointer hover:scale-105"},Ve,8,_e),R(n("img",{src:o.url,alt:"image"},null,8,he),[[l(Z)]])]))),256))])):G("",!0),s(l(L),{modelValue:f.value,"onUpdate:modelValue":t[11]||(t[11]=o=>f.value=o),title:"Delete image",onClose:t[12]||(t[12]=o=>P())},{footer:r(({close:o})=>[s(l(g),{onClick:o,color:"danger",class:"mr-2",outline:""},{default:r(()=>[p(" Cancel ")]),_:2},1032,["onClick"]),s(l(g),{onClick:F},{default:r(()=>[p(" Confirm ")]),_:1})]),default:r(()=>[ke]),_:1},8,["modelValue"]),s(l(U),{class:K({"cursor-pointer":i.value>0,"cursor-no-drop":i.value<=0,"mb-0":!0}),name:"image",ref:"pond","label-idle":"Drop images here... Max: "+i.value,"accepted-file-types":"image/jpeg, image/png, image/jpg","allow-multiple":!0,maxFiles:i.value,disabled:i.value<=0,required:i.value>=k,onInitfile:t[13]||(t[13]=o=>C(!0)),onProcessfilestart:t[14]||(t[14]=o=>C(!0)),onProcessfiles:t[15]||(t[15]=o=>C(!1)),server:{process:{url:"/en/upload-tmp",method:"POST",onload:j},revert:O,headers:{"X-CSRF-TOKEN":a.$page.props.csrf_token}}},null,8,["class","label-idle","maxFiles","disabled","required","server"]),s(l(g),{type:"submit",disabled:l(e).processing||y.value||!l(e).isDirty,block:""},{default:r(()=>[p(" Save ")]),_:1},8,["disabled"])],40,re)]),_:1},8,["modelValue"])],64)}}};export{Ue as default};
