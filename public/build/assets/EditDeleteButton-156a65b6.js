import{r as u,T as H,c as _,b as s,a as r,w as n,u as t,F as O,o as h,d as m,f as T,g as R,j as q,i as X,n as z,e as G,O as b,Q as x}from"./app-87e4b527.js";import{R as V}from"./MazDialog-fdEu8dqH-79fc69b2.js";import{O as c}from"./MazBtn-DgGnjAgh-dfd0a08f.js";import{y as L}from"./MazInput-TEx7J5N7-e9b11969.js";import{v as K,p as Q,a as Z}from"./filepond-plugin-image-preview.esm-ee57de24.js";import{_ as D}from"./InputError-937ebae9.js";const J={class:"flex items-center justify-end gap-x-2 md:gap-x-4"},W=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1),Y=[W],ee=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),le=[ee],ae=s("p",null," Are you sure you want to delete this category? ",-1),te=["onSubmit"],oe={class:"grid grid-cols-3 gap-6"},se={class:"col-span-3"},re={class:"col-span-3"},ne={class:"col-span-3"},ie={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},de={class:"relative rounded-xl overflow-hidden hover:scale-105 transform transition duration-200 w-fit"},ue=["onClick"],me=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-white"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),ce=[me],ve=["src"],ge=s("p",null," Are you sure you want to delete this image? ",-1),C=1,ke={__name:"EditDeleteButton",props:{id:Number},setup(S){const w=S,v=u(!1),d=u([]),i=u(C),g=u(!1),p=u(null),f=u(!1),k=u(!1),o=H({name_en:"",name_fr:"",name_de:"",images:[]}),$=K(Z,Q);function j(a){return o.images.push(a),a}function E(a,e,l){o.images=o.images.filter(M=>M!==a),b.delete("/en/delete-tmp/"+a),e()}function F(){axios.get("categories/"+w.id).then(a=>{o.name_en=a.data.name_en,o.name_fr=a.data.name_fr,o.name_de=a.data.name_de,d.value=a.data.image?[a.data.image]:[],i.value-=a.data.image?[a.data.image].length:0,v.value=!0})}function I(){o.reset(),o.clearErrors(),d.value=[],i.value=C,k.value=!1}function N(a){p.value=a,g.value=!0}function P(){b.delete(route("delete.image",[x().props.currentLocale,p.value])),d.value=d.value.filter(a=>a.id!==p.value),i.value=C-d.value.length,g.value=!1}function U(){p.value=null}function A(){b.delete(route("admin.categories.destroy",[x().props.currentLocale,w.id]),{preserveScroll:!0,preserveState:a=>Object.keys(a.props.errors).length}),f.value=!1}function B(){o.patch(route("admin.categories.update",[x().props.currentLocale,w.id]),{preserveScroll:!0,preserveState:a=>Object.keys(a.props.errors).length,onSuccess:()=>v.value=!1})}function y(a){k.value=a}return(a,e)=>(h(),_(O,null,[s("div",J,[s("div",{onClick:e[0]||(e[0]=l=>F()),class:"hover:text-indigo-500 cursor-pointer"},Y),s("div",{onClick:e[1]||(e[1]=l=>f.value=!0),class:"hover:text-red-500 cursor-pointer"},le)]),r(t(V),{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),title:"Delete category"},{footer:n(({close:l})=>[r(t(c),{onClick:l,color:"danger",class:"mr-2",outline:""},{default:n(()=>[m(" Cancel ")]),_:2},1032,["onClick"]),r(t(c),{onClick:A},{default:n(()=>[m(" Confirm ")]),_:1})]),default:n(()=>[ae]),_:1},8,["modelValue"]),r(t(V),{modelValue:v.value,"onUpdate:modelValue":e[11]||(e[11]=l=>v.value=l),title:"Edit category",width:"800px",maxHeight:"80vh",scrollable:"",onClose:e[12]||(e[12]=l=>I())},{default:n(()=>[s("form",{onSubmit:G(B,["prevent"]),class:"space-y-6"},[s("div",oe,[s("div",se,[r(t(L),{modelValue:t(o).name_en,"onUpdate:modelValue":e[3]||(e[3]=l=>t(o).name_en=l),label:"Name (en)",class:"focus:ring-amber-600",required:""},null,8,["modelValue"]),r(D,{class:"mt-1",message:t(o).errors.name_en},null,8,["message"])]),s("div",re,[r(t(L),{modelValue:t(o).name_fr,"onUpdate:modelValue":e[4]||(e[4]=l=>t(o).name_fr=l),label:"Name (fr)",class:"focus:ring-amber-600"},null,8,["modelValue"]),r(D,{class:"mt-1",message:t(o).errors.name_fr},null,8,["message"])]),s("div",ne,[r(t(L),{modelValue:t(o).name_de,"onUpdate:modelValue":e[5]||(e[5]=l=>t(o).name_de=l),label:"Name (de)",class:"focus:ring-amber-600"},null,8,["modelValue"]),r(D,{class:"mt-1",message:t(o).errors.name_de},null,8,["message"])])]),d.value.length>0?(h(),_("div",ie,[(h(!0),_(O,null,T(d.value,l=>(h(),_("div",de,[s("div",{onClick:M=>N(l.id),class:"absolute top-2 right-2 bg-red-500 rounded-full p-1 cursor-pointer hover:scale-105"},ce,8,ue),R(s("img",{src:l.url,alt:"image"},null,8,ve),[[t(q)]])]))),256))])):X("",!0),r(t(V),{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=l=>g.value=l),title:"Delete image",onClose:e[7]||(e[7]=l=>U())},{footer:n(({close:l})=>[r(t(c),{onClick:l,color:"danger",class:"mr-2",outline:""},{default:n(()=>[m(" Cancel ")]),_:2},1032,["onClick"]),r(t(c),{onClick:P},{default:n(()=>[m(" Confirm ")]),_:1})]),default:n(()=>[ge]),_:1},8,["modelValue"]),r(t($),{class:z({"cursor-pointer":i.value>0,"cursor-no-drop":i.value<=0,"mb-0":!0}),name:"image",ref:"pond","label-idle":"Drop images here... Max: "+i.value,"accepted-file-types":"image/jpeg, image/png, image/jpg","allow-multiple":!0,maxFiles:i.value,disabled:i.value<=0,required:i.value>=C,onInitfile:e[8]||(e[8]=l=>y(!0)),onProcessfilestart:e[9]||(e[9]=l=>y(!0)),onProcessfiles:e[10]||(e[10]=l=>y(!1)),server:{process:{url:"/en/upload-tmp",method:"POST",onload:j},revert:E,headers:{"X-CSRF-TOKEN":a.$page.props.csrf_token}}},null,8,["class","label-idle","maxFiles","disabled","required","server"]),r(t(c),{type:"submit",disabled:t(o).processing||k.value||!t(o).isDirty,block:""},{default:n(()=>[m(" Save ")]),_:1},8,["disabled"])],40,te)]),_:1},8,["modelValue"])],64))}};export{ke as default};
