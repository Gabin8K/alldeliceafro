import{l as E,r as S,m,R as $,L as f,o as d,c as y,F as x,f as B,n as b,b as g,s as w,k as R,w as Y,d as Z,t as G,e as J}from"./app-87e4b527.js";import{$ as K,b as o,H as A,P as Q}from"./UpdateOpeningHoursForm-738da24b.js";import U from"./MazBtn-BiYUlXj8-f4ec6aba.js";/* empty css                    */import"./MazBtn-DgGnjAgh-dfd0a08f.js";const W={class:"m-picker-time__column__items"},X=E({__name:"MazPickerTime",props:{modelValue:{type:[String,Object],default:void 0},calendarDate:{type:String,required:!0},formatterOptions:{type:Object,required:!0},locale:{type:String,required:!0},color:{type:String,required:!0},isOpen:{type:Boolean,required:!0},hasDate:{type:Boolean,required:!0},minuteInterval:{type:Number,required:!0},disabledHours:{type:Array,default:void 0},format:{type:String,required:!0},isHour12:{type:Boolean,required:!0},minDate:{type:String,default:void 0},maxDate:{type:String,default:void 0},disabled:{type:Boolean,required:!0}},emits:["update:model-value"],setup(c,{emit:z}){const i=c,M=e=>{if(!i.disabledHours)return e;const a=Array.from({length:24},(r,u)=>u).filter(r=>{var u;return!((u=i.disabledHours)!=null&&u.includes(r))||!0}),t=A(a,e);return t!==e&&q("hour",o(l.value).set("hour",t)),t},j=z,s=S(),n=S(),v=m(()=>typeof l.value=="string"?M(o(l.value).get("hour")):void 0),C=m(()=>typeof l.value=="string"?A(k.value.map(({value:e})=>e.get("minute")),o(l.value).get("minute")):void 0),P=e=>{if(i.isHour12){const a=h.value==="pm"?e+12:e;return a===12?0:a===24?12:a}else return e},T=m(()=>Array.from({length:i.isHour12?12:24},(e,a)=>a).map(e=>{const a=e+(i.isHour12?1:0),t=P(a),r=o(l.value).set("hour",t),u=O(t)||(i.minDate&&l.value?o(i.minDate).isAfter(r,"hour"):!1)||(i.maxDate&&l.value?o(i.maxDate).isBefore(r,"hour"):!1);return{label:`${a<10?"0":""}${a}`,value:o(l.value).set("hour",t),isDisabled:u}})),k=m(()=>{const e=Math.floor(60/i.minuteInterval)-0;return Array.from({length:e},(a,t)=>t*i.minuteInterval).map(a=>{const t=o(l.value).set("minute",a),r=(i.minDate&&l.value?o(i.minDate).isAfter(t,"minute"):!1)||(i.maxDate&&l.value?o(i.maxDate).isBefore(t,"minute"):!1);return{label:`${a<10?"0":""}${a}`,value:t,isDisabled:r}})}),h=m(()=>typeof v.value=="number"?v.value>=12?"pm":"am":void 0),V=m(()=>i.isHour12?[{label:"AM",value:"am"},{label:"PM",value:"pm"}]:[]),I=m(()=>{const e=[{identifier:"hour",values:T.value},{identifier:"minute",values:k.value}];return i.isHour12&&e.push({identifier:"ampm",values:V.value}),e}),l=m({get:()=>i.modelValue,set:e=>{j("update:model-value",e)}});$(()=>i.isOpen,async e=>{var a;if(e){if(await f(),s.value){const t=s.value.querySelector(".m-picker-time__column .m-btn"),r=t==null?void 0:t.offsetHeight,u=((a=s.value)==null?void 0:a.offsetHeight)/2-r/2;n.value=u/16}D(!1)}},{immediate:!0}),$(()=>i.modelValue,async(e,a)=>{e!==a&&(await f(),D(!0))},{immediate:!0});const D=e=>{p("hour",e),p("minute",e),i.isHour12&&p("ampm",e)},O=e=>(i.disabledHours&&i.disabledHours.includes(e))??!1,H=(e,a)=>a==="am"||a==="pm"?h.value===a:e==="hour"?v.value===a.get(e):e==="minute"?C.value===a.get(e):!1,p=async(e,a=!0)=>{if(s.value){const t=s.value.querySelector(`.m-picker-time__column__${e}`),r=s.value.querySelector(`.m-picker-time__column__${e} .--is-selected`);n.value&&t&&r&&s.value&&(await f(),Q(t,r,n.value*16,a))}},q=async(e,a)=>{const t=o(l.value);if(e==="hour"&&typeof a=="object"&&(l.value=t.set("hour",a.get("hour")).format()),e==="minute"&&typeof a=="object"){const r=t.set("minute",a.get("minute"));l.value=r.format()}if(e==="ampm"&&(h.value!==a||!v.value)&&(a==="am"&&(l.value=t.set("hour",t.get("hour")).subtract(12,"hour").format()),a==="pm")){const r=t.get("hour"),u=r+12>12&&r+12<24?r+12:r===0?12:r;l.value=t.set("hour",u).format()}await f(),p(e)};return(e,a)=>(d(),y("div",{ref_key:"MazPickerTime",ref:s,class:b(["m-picker-time",{"--has-date":c.hasDate}])},[(d(!0),y(x,null,B(I.value,({values:t,identifier:r},u)=>(d(),y("div",{key:u,class:b(["m-picker-time__column",[`m-picker-time__column__${r}`]])},[g("div",{style:w({height:`${n.value}rem`}),class:"m-picker-time__column__divider"},null,4),g("div",W,[(d(!0),y(x,null,B(t,({value:_,label:N,isDisabled:F},L)=>(d(),R(U,{key:L,size:"xs",color:H(r,_)?c.color:"transparent",class:b({"--is-selected":H(r,_)}),disabled:F||c.disabled,type:"button",onClick:J(ee=>q(r,_),["stop"])},{default:Y(()=>[Z(G(N),1)]),_:2},1032,["color","class","disabled","onClick"]))),128))]),g("div",{style:w({height:`${n.value}rem`}),class:"m-picker-time__column__divider"},null,4)],2))),128))],2))}}),ue=K(X,[["__scopeId","data-v-c85d4cb7"]]);export{ue as default};
