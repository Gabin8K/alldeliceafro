import{O as T}from"./MazBtn-DgGnjAgh-dfd0a08f.js";import{l as j,P as q,r as V,R as E,m as x,o as y,c as _,F as S,f as P,n as L,i as O,b as r,p as F,s as K,Q as w,T as R,a as u,u as f,w as h,Z as D,d as H,e as U}from"./app-87e4b527.js";import{_ as Z}from"./AuthenticatedLayout-dfa63e3b.js";import{_ as Q}from"./UpdateOpeningHoursForm-738da24b.js";import{_ as W}from"./UpdateInfoForm-5cd8a961.js";import{R as G}from"./MazDialog-fdEu8dqH-79fc69b2.js";import{_ as J}from"./InputError-937ebae9.js";import"./ApplicationLogo-dfe0f8b3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-b5db98bd.js";/* empty css                    */import"./MazInput-TEx7J5N7-e9b11969.js";import"./MazSelect-qw3H2BrO-4eb8767a.js";const X=["disabled"],Y=["inputmode","pattern","required","value","onInput","onKeydown"],ee=j({inheritAttrs:!1,__name:"MazInputCode",props:{style:{default:void 0},class:{default:void 0},modelValue:{default:void 0},codeLength:{default:4},type:{default:"text"},acceptAlpha:{type:Boolean,default:!1},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},success:{type:Boolean,default:!1},warning:{type:Boolean,default:!1},size:{default:"md"},color:{default:"primary"}},emits:["update:model-value","completed"],setup(l,{emit:d}){q(e=>({"141e9738":M.value}));const o=l,c=d,i=V([]),n=V(new Map);E(()=>o.modelValue,(e,t)=>{e!==t&&(n.value=v())},{immediate:!0});const g=x({get:()=>n.value,set:e=>{const t=N(e);c("update:model-value",t),(t==null?void 0:t.toString().length)===o.codeLength&&c("completed")}});function v(e=o.modelValue){const t=new Map;for(const a of Array.from({length:o.codeLength},(s,p)=>p))if(e===void 0)t.set(a+1,void 0);else{const s=[...e.toString()];t.set(a+1,s[a])}return t}function I(e,t){var a;const s=z((a=e.target)==null?void 0:a.value);g.value=n.value.set(t,s),s&&b(t)}function N(e){const t=[...e.values()].join("");return o.type==="text"?t:t&&!Number.isNaN(Number(t))?Number(t):void 0}function z(e){var t;return(t=o.acceptAlpha?e.match(/^[\w.]$/i):e.match(/\d+/g))==null?void 0:t.toString()}function $(e,t){const a=n.value.get(t);if(e.key==="Backspace"&&!a){const s=t-1<0?0:t-1;g.value=n.value.set(s,void 0),b(s-1)}}function k(e){var t;const a=(t=e.clipboardData)==null?void 0:t.getData("text");if(!a)return;const s=Array.from({length:o.codeLength},(p,m)=>({index:m+1,value:[...a.toString()][m]??void 0}));for(const{index:p,value:m}of s){const B=m?z(m):void 0;B&&n.value.set(p,B)}setTimeout(()=>{const p=A(),m=p>=o.codeLength?o.codeLength-1:p;b(m,!1)},0)}function A(){return[...n.value.values()].filter(Boolean).length}function b(e,t=!0){setTimeout(()=>{const a=i.value[e];e+1>o.codeLength||!a||(a.focus(),t&&a.select())},0)}const C=x(()=>o.error?"!maz-border-danger":o.success?"!maz-border-success":o.warning?"!maz-border-warning":""),M=x(()=>`var(--maz-color-${o.color})`);return(e,t)=>(y(),_("fieldset",{class:L(["m-input-code",[e.size?`--${e.size}`:void 0,o.class]]),disabled:e.disabled,style:K(e.style)},[(y(!0),_(S,null,P(e.codeLength,a=>(y(),_("div",{key:a,class:L(["input-wrapper",C.value])},[O(" eslint-disable-next-line vuejs-accessibility/form-control-has-label "),r("input",F({ref_for:!0,ref:s=>{i.value[a-1]=s},type:"text",minlength:"1",maxlength:"1",inputmode:e.acceptAlpha?"text":"numeric",pattern:e.acceptAlpha?"[a-zA-Z0-9]{1}":"[0-9]{1}",autocomplete:"do-not-autofill",required:e.required},e.$attrs,{value:g.value.get(a),onInput:s=>I(s,a),onKeydown:s=>$(s,a),onPaste:k}),null,16,Y)],2))),128))],14,X))}}),te=(l,d)=>{const o=l.__vccOpts||l;for(const[c,i]of d)o[c]=i;return o},oe=te(ee,[["__scopeId","data-v-aff631c9"]]),ae=r("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Info",-1),se={class:"py-12"},ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6 grid grid-cols-1 lg:grid-cols-2 lg:space-x-6 lg:items-start lg:space-y-0"},re={class:"p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg"},le={class:"p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg"},ie=["onSubmit"],ue={class:"flex items-center justify-end gap-4"},de=["href"],ze={__name:"Edit",props:{mustVerifyEmail:{type:Boolean},status:{type:String},openingInfo:{type:String},openingHours:{type:Object}},setup(l){const d=V(w().props.auth.user.restaurant.phone!==null&&w().props.auth.user.restaurant.phone_verified_at===null),o=R({code:""});function c(){o.post(route("verify.phone.number",w().props.currentLocale),{preserveScroll:!0,preserveState:i=>Object.keys(i.props.errors).length,onSuccess:()=>{o.reset(),d.value=!1}})}return(i,n)=>{const g=T;return y(),_(S,null,[u(f(D),{title:"Info"}),u(Z,null,{header:h(()=>[ae]),default:h(()=>[r("div",se,[r("div",ne,[r("div",re,[u(W,{class:""})]),r("div",le,[u(Q,{"must-verify-email":l.mustVerifyEmail,status:l.status,"opening-info":l.openingInfo,"opening-hours":l.openingHours,class:""},null,8,["must-verify-email","status","opening-info","opening-hours"])])])]),u(f(G),{modelValue:d.value,"onUpdate:modelValue":n[1]||(n[1]=v=>d.value=v),title:"Please verify your number"},{default:h(()=>[r("form",{onSubmit:U(c,["prevent"]),class:"space-y-6"},[u(f(oe),{modelValue:f(o).code,"onUpdate:modelValue":n[0]||(n[0]=v=>f(o).code=v),size:"xs",onCompleted:c,required:""},null,8,["modelValue"]),u(J,{message:f(o).errors.code},null,8,["message"]),r("div",ue,[r("div",null,[r("a",{href:i.route("get.sms.code",i.$page.props.currentLocale),class:"underline"}," Resend verification code? ",8,de)]),u(g,{type:"submit"},{default:h(()=>[H(" Verify ")]),_:1})])],40,ie)]),_:1},8,["modelValue"])]),_:1})],64)}}};export{ze as default};
