import{r as f,T as A,c as N,a as o,u as e,w as i,F as S,o as O,Z as U,b as t,d as _,e as F,h as P,Q as D,O as K}from"./app-87e4b527.js";import{_ as M}from"./AuthenticatedLayout-cd5bbb9d.js";import{_ as j}from"./TableTanstack-92db18e5.js";import E from"./EditDeleteButton-13eff741.js";import{R as I}from"./MazDialog-fdEu8dqH-79fc69b2.js";import{O as v}from"./MazBtn-DgGnjAgh-dfd0a08f.js";import{y as c}from"./MazInput-TEx7J5N7-e9b11969.js";import{v as L,p as T,a as X}from"./filepond-plugin-image-preview.esm-ee57de24.js";import{_ as n}from"./InputError-937ebae9.js";import{D as q}from"./MazInputNumber-DSWPuRyf-80c0e0ff.js";import{X as B}from"./MazSelect-qw3H2BrO-4eb8767a.js";import{Z as g}from"./MazTextarea-b76d04fa.js";import"./ApplicationLogo-dfe0f8b3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-b5db98bd.js";const R=t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Articles",-1),Z={class:"py-12"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg sm:relative"},H={class:"ms-4 sm:ms-6 lg:ms-8 mt-5 sm:absolute sm:top-0.5"},Q={class:"pb-6"},z=["onSubmit"],J={class:"grid grid-cols-3 gap-6"},Y={class:"col-span-3 md:col-span-1"},ee={class:"col-span-3 md:col-span-1"},se={class:"col-span-3 md:col-span-1"},le={class:"grid grid-cols-2 gap-6"},ae={class:"col-span-2 md:col-span-1"},oe={class:"col-span-2 md:col-span-1"},V=3,ye={__name:"Index",props:{categories:{type:Object},articles:{type:Object}},setup(d){const b=d,m=f(!1),p=f(!1),s=A({category_id:null,name_en:"",name_fr:"",name_de:"",description_en:"",description_fr:"",description_de:"",weight:null,images:[]}),y=L(X,T),h=[{accessorKey:"name_en",header:"Name (en)"},{accessorKey:"name_fr",header:"Name (fr)"},{accessorKey:"name_de",header:"Name (de)"},{accessorKey:"weight",header:"Weight (g)"},{accessorKey:"edit",header:"Actions",cell:({row:r})=>P(E,{id:r.original.id,categories:b.categories}),enableSorting:!1}],w=()=>{s.post(route("admin.articles.store",D().props.currentLocale),{preserveScroll:!0,preserveState:r=>Object.keys(r.props.errors).length})};function x(){s.reset(),s.clearErrors(),p.value=!1}function $(r){return s.images.push(r),r}function k(r,l,a){s.images=s.images.filter(C=>C!==r),K.delete("/en/delete-tmp/"+r),l()}function u(r){p.value=r}return(r,l)=>(O(),N(S,null,[o(e(U),{title:"Article"}),o(M,null,{header:i(()=>[R]),default:i(()=>[t("div",Z,[t("div",W,[t("div",G,[t("div",H,[o(e(v),{onClick:l[0]||(l[0]=a=>m.value=!0),outline:""},{default:i(()=>[_(" Create article ")]),_:1})]),t("div",Q,[o(j,{data:d.articles,columns:h},null,8,["data"])])])])]),o(e(I),{modelValue:m.value,"onUpdate:modelValue":l[12]||(l[12]=a=>m.value=a),title:"Create article",width:"800px",maxHeight:"80vh",scrollable:"",onClose:l[13]||(l[13]=a=>x())},{default:i(()=>[t("form",{onSubmit:F(w,["prevent"]),class:"space-y-6"},[t("div",J,[t("div",Y,[o(e(c),{modelValue:e(s).name_en,"onUpdate:modelValue":l[1]||(l[1]=a=>e(s).name_en=a),label:"Name (en)",required:""},null,8,["modelValue"]),o(n,{class:"mt-1",message:e(s).errors.name_en},null,8,["message"])]),t("div",ee,[o(e(c),{modelValue:e(s).name_fr,"onUpdate:modelValue":l[2]||(l[2]=a=>e(s).name_fr=a),label:"Name (fr)"},null,8,["modelValue"]),o(n,{class:"mt-1",message:e(s).errors.name_fr},null,8,["message"])]),t("div",se,[o(e(c),{modelValue:e(s).name_de,"onUpdate:modelValue":l[3]||(l[3]=a=>e(s).name_de=a),label:"Name (de)"},null,8,["modelValue"]),o(n,{class:"mt-1",message:e(s).errors.name_de},null,8,["message"])])]),t("div",le,[t("div",ae,[o(e(q),{modelValue:e(s).weight,"onUpdate:modelValue":l[4]||(l[4]=a=>e(s).weight=a),label:"Weight (g)",min:0,step:1,style:{width:"100%"},required:""},null,8,["modelValue"]),o(n,{class:"mt-1",message:e(s).errors.weight},null,8,["message"])]),t("div",oe,[o(e(B),{label:"Select category",modelValue:e(s).category_id,"onUpdate:modelValue":l[5]||(l[5]=a=>e(s).category_id=a),options:d.categories,"option-value-key":"id","option-label-key":"name_"+r.$page.props.currentLocale,"option-input-value-key":"name_"+r.$page.props.currentLocale,search:"",required:""},null,8,["modelValue","options","option-label-key","option-input-value-key"]),o(n,{class:"mt-1",message:e(s).errors.category_id},null,8,["message"])])]),t("div",null,[o(e(g),{modelValue:e(s).description_en,"onUpdate:modelValue":l[6]||(l[6]=a=>e(s).description_en=a),label:"Description (en)"},null,8,["modelValue"]),o(n,{class:"mt-1",message:e(s).errors.description_en},null,8,["message"])]),t("div",null,[o(e(g),{modelValue:e(s).description_fr,"onUpdate:modelValue":l[7]||(l[7]=a=>e(s).description_fr=a),label:"Description (fr)"},null,8,["modelValue"]),o(n,{class:"mt-1",message:e(s).errors.description_fr},null,8,["message"])]),t("div",null,[o(e(g),{modelValue:e(s).description_de,"onUpdate:modelValue":l[8]||(l[8]=a=>e(s).description_de=a),label:"Description (de)"},null,8,["modelValue"]),o(n,{class:"mt-1",message:e(s).errors.description_de},null,8,["message"])]),o(e(y),{name:"image",ref:"pond","label-idle":"Drop images here... Max: "+V,class:"cursor-pointer","allow-multiple":!0,maxFiles:V,required:!0,"accepted-file-types":"image/jpeg, image/png, image/jpg",onInitfile:l[9]||(l[9]=a=>u(!0)),onProcessfilestart:l[10]||(l[10]=a=>u(!0)),onProcessfiles:l[11]||(l[11]=a=>u(!1)),server:{url:"",process:{url:"/en/upload-tmp",method:"POST",onload:$},revert:k,headers:{"X-CSRF-TOKEN":r.$page.props.csrf_token}}},null,8,["label-idle","server"]),o(e(v),{type:"submit",disabled:e(s).processing||p.value||!e(s).isDirty,block:""},{default:i(()=>[_(" Save ")]),_:1},8,["disabled"])],40,z)]),_:1},8,["modelValue"])]),_:1})],64))}};export{ye as default};
