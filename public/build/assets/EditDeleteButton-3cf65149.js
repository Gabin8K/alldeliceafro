import{r as u,T as H,c as h,b as a,a as r,w as n,u as o,F as D,o as w,d as m,f as T,g as q,j as R,i as X,n as Z,e as z,O as x,Q as V}from"./app-87e4b527.js";import{R as P}from"./MazDialog-fdEu8dqH-79fc69b2.js";import{O as c}from"./MazBtn-DgGnjAgh-dfd0a08f.js";import{Z as G}from"./MazTextarea-b76d04fa.js";import{y as M}from"./MazInput-TEx7J5N7-e9b11969.js";import{v as K,p as Q,a as J}from"./filepond-plugin-image-preview.esm-ee57de24.js";import{_ as y}from"./InputError-937ebae9.js";const W={class:"flex items-center justify-end gap-x-2 md:gap-x-4"},Y=a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1),ee=[Y],te=a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),oe=[te],le=a("p",null," Are you sure you want to delete this product? ",-1),se=["onSubmit"],ae={class:"grid grid-cols-3 gap-6"},re={class:"col-span-3 sm:col-span-2"},ne={class:"col-span-3 sm:col-span-1"},ie={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},de={class:"relative rounded-xl overflow-hidden hover:scale-105 transform transition duration-200 w-fit"},ue=["onClick"],me=a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-white"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),ce=[me],pe=["src"],ve=a("p",null," Are you sure you want to delete this image? ",-1),k=3,be={__name:"EditDeleteButton",props:{id:Number},setup(S){const _=S,p=u(!1),d=u([]),i=u(k),v=u(!1),g=u(null),f=u(!1),C=u(!1),s=H({name:"",price:"",description:"",images:[]}),O=K(J,Q);function $(l){return s.images.push(l),l}function j(l,e,t){s.images=s.images.filter(L=>L!==l),x.delete("/en/delete-tmp/"+l),e()}function E(){axios.get("products/"+_.id).then(l=>{s.name=l.data.name,s.price=l.data.price,s.description=l.data.description,d.value=l.data.images,i.value-=l.data.images.length,p.value=!0})}function F(){s.reset(),s.clearErrors(),d.value=[],i.value=k,C.value=!1}function I(l){g.value=l,v.value=!0}function U(){x.delete(route("delete.image",[V().props.currentLocale,g.value])),d.value=d.value.filter(l=>l.id!==g.value),i.value=k-d.value.length,v.value=!1}function A(){g.value=null}function B(){x.delete(route("restaurant.products.delete",[V().props.currentLocale,_.id]),{preserveScroll:!0,preserveState:l=>Object.keys(l.props.errors).length,onSuccess:()=>f.value=!1})}function N(){s.patch(route("restaurant.products.update",[V().props.currentLocale,_.id]),{preserveScroll:!0,preserveState:l=>Object.keys(l.props.errors).length,onSuccess:()=>p.value=!1})}function b(l){C.value=l}return(l,e)=>(w(),h(D,null,[a("div",W,[a("div",{onClick:e[0]||(e[0]=t=>E()),class:"hover:text-indigo-500 cursor-pointer"},ee),a("div",{onClick:e[1]||(e[1]=t=>f.value=!0),class:"hover:text-red-500 cursor-pointer"},oe)]),r(o(P),{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),title:"Delete product"},{footer:n(({close:t})=>[r(o(c),{onClick:t,color:"danger",class:"mr-2",outline:""},{default:n(()=>[m(" Cancel ")]),_:2},1032,["onClick"]),r(o(c),{onClick:B},{default:n(()=>[m(" Confirm ")]),_:1})]),default:n(()=>[le]),_:1},8,["modelValue"]),r(o(P),{modelValue:p.value,"onUpdate:modelValue":e[11]||(e[11]=t=>p.value=t),title:"Edit product",width:"800px",maxHeight:"80vh",scrollable:"",onClose:e[12]||(e[12]=t=>F())},{default:n(()=>[a("form",{onSubmit:z(N,["prevent"]),class:"space-y-6"},[a("div",ae,[a("div",re,[r(o(M),{modelValue:o(s).name,"onUpdate:modelValue":e[3]||(e[3]=t=>o(s).name=t),label:"Name",class:"focus:ring-amber-600",required:""},null,8,["modelValue"]),r(y,{class:"mt-2",message:o(s).errors.name},null,8,["message"])]),a("div",ne,[r(o(M),{modelValue:o(s).price,"onUpdate:modelValue":e[4]||(e[4]=t=>o(s).price=t),label:"Price",type:"number",required:""},null,8,["modelValue"]),r(y,{class:"mt-2",message:o(s).errors.price},null,8,["message"])])]),r(o(G),{modelValue:o(s).description,"onUpdate:modelValue":e[5]||(e[5]=t=>o(s).description=t),label:"Description",required:""},null,8,["modelValue"]),r(y,{class:"mt-2",message:o(s).errors.description},null,8,["message"]),d.value.length>0?(w(),h("div",ie,[(w(!0),h(D,null,T(d.value,t=>(w(),h("div",de,[a("div",{onClick:L=>I(t.id),class:"absolute top-2 right-2 bg-red-500 rounded-full p-1 cursor-pointer hover:scale-105"},ce,8,ue),q(a("img",{src:t.url,alt:"image"},null,8,pe),[[o(R)]])]))),256))])):X("",!0),r(o(P),{modelValue:v.value,"onUpdate:modelValue":e[6]||(e[6]=t=>v.value=t),title:"Delete image",onClose:e[7]||(e[7]=t=>A())},{footer:n(({close:t})=>[r(o(c),{onClick:t,color:"danger",class:"mr-2",outline:""},{default:n(()=>[m(" Cancel ")]),_:2},1032,["onClick"]),r(o(c),{onClick:U},{default:n(()=>[m(" Confirm ")]),_:1})]),default:n(()=>[ve]),_:1},8,["modelValue"]),r(o(O),{class:Z({"cursor-pointer":i.value>0,"cursor-no-drop":i.value<=0,"mb-0":!0}),name:"image",ref:"pond","label-idle":"Drop images here... Max: "+i.value,"accepted-file-types":"image/jpeg, image/png, image/jpg","allow-multiple":!0,maxFiles:i.value,disabled:i.value<=0,required:i.value>=k,onInitfile:e[8]||(e[8]=t=>b(!0)),onProcessfilestart:e[9]||(e[9]=t=>b(!0)),onProcessfiles:e[10]||(e[10]=t=>b(!1)),server:{process:{url:"/en/upload-tmp",method:"POST",onload:$},revert:j,headers:{"X-CSRF-TOKEN":l.$page.props.csrf_token}}},null,8,["class","label-idle","maxFiles","disabled","required","server"]),r(o(c),{type:"submit",disabled:o(s).processing||C.value||!o(s).isDirty,block:""},{default:n(()=>[m(" Save ")]),_:1},8,["disabled"])],40,se)]),_:1},8,["modelValue"])],64))}};export{be as default};
