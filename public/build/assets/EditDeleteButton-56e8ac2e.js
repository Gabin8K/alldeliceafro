import{Z as N}from"./MazTextarea-b76d04fa.js";import{r as u,T as H,c as w,b as a,a as r,w as n,u as t,F as D,o as _,H as T,d as m,f as Z,g as R,j as q,i as z,n as X,e as G,O as S,Q as y}from"./app-87e4b527.js";import{R as L}from"./MazDialog-fdEu8dqH-79fc69b2.js";import{O as p}from"./MazBtn-DgGnjAgh-dfd0a08f.js";import{y as K}from"./MazInput-TEx7J5N7-e9b11969.js";import{v as Q,p as J,a as W}from"./filepond-plugin-image-preview.esm-ee57de24.js";import{_ as k}from"./InputError-937ebae9.js";const Y={class:"flex items-center justify-end gap-x-2 md:gap-x-4"},ee=a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})],-1),oe=a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1),le=[oe],te=a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),se=[te],ae=a("p",null," Are you sure you want to delete this shop? ",-1),re=["onSubmit"],ne={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},ie={class:"relative rounded-xl overflow-hidden hover:scale-105 transform transition duration-200 w-fit"},de=["onClick"],ue=a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-white"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),me=[ue],pe=["src"],ce=a("p",null," Are you sure you want to delete this image? ",-1),C=1,Ve={__name:"EditDeleteButton",props:{id:Number},setup(M){const V=M,c=u(!1),d=u([]),i=u(C),v=u(!1),g=u(null),f=u(!1),x=u(!1),s=H({name:"",description_en:"",description_fr:"",description_de:"",images:[]}),j=Q(W,J);function $(l){return s.images.push(l),l}function O(l,e,h){s.images=s.images.filter(o=>o!==l),S.delete("/en/delete-tmp/"+l),e()}function E(){axios.get("shops/"+V.id).then(l=>{s.name=l.data.name,s.description_en=l.data.description_en,s.description_fr=l.data.description_fr,s.description_de=l.data.description_de,d.value=l.data.image?[l.data.image]:[],i.value-=l.data.image?[l.data.image].length:0,c.value=!0})}function F(){s.reset(),s.clearErrors(),d.value=[],i.value=C,x.value=!1}function I(l){g.value=l,v.value=!0}function B(){S.delete(route("delete.image",[y().props.currentLocale,g.value])),d.value=d.value.filter(l=>l.id!==g.value),i.value=C-d.value.length,v.value=!1}function P(){g.value=null}function U(){S.delete(route("admin.shops.destroy",[y().props.currentLocale,V.id]),{preserveScroll:!0,preserveState:l=>Object.keys(l.props.errors).length}),f.value=!1}function A(){s.patch(route("admin.shops.update",[y().props.currentLocale,V.id]),{preserveScroll:!0,preserveState:l=>Object.keys(l.props.errors).length,onSuccess:()=>c.value=!1})}function b(l){x.value=l}return(l,e)=>{const h=N;return _(),w(D,null,[a("div",Y,[r(t(T),{href:l.route("admin.shops.edit",[l.$page.props.currentLocale,M.id]),class:"hover:text-indigo-500 cursor-pointer"},{default:n(()=>[ee]),_:1},8,["href"]),a("div",{onClick:e[0]||(e[0]=o=>E()),class:"hover:text-indigo-500 cursor-pointer"},le),a("div",{onClick:e[1]||(e[1]=o=>f.value=!0),class:"hover:text-red-500 cursor-pointer"},se)]),r(t(L),{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=o=>f.value=o),title:"Delete shop"},{footer:n(({close:o})=>[r(t(p),{onClick:o,color:"danger",class:"mr-2",outline:""},{default:n(()=>[m(" Cancel ")]),_:2},1032,["onClick"]),r(t(p),{onClick:U},{default:n(()=>[m(" Confirm ")]),_:1})]),default:n(()=>[ae]),_:1},8,["modelValue"]),r(t(L),{modelValue:c.value,"onUpdate:modelValue":e[12]||(e[12]=o=>c.value=o),title:"Edit shop",width:"800px",maxHeight:"80vh",scrollable:"",onClose:e[13]||(e[13]=o=>F())},{default:n(()=>[a("form",{onSubmit:G(A,["prevent"]),class:"space-y-6"},[a("div",null,[r(t(K),{modelValue:t(s).name,"onUpdate:modelValue":e[3]||(e[3]=o=>t(s).name=o),label:"Name",required:""},null,8,["modelValue"]),r(k,{class:"mt-1",message:t(s).errors.name},null,8,["message"])]),a("div",null,[r(h,{modelValue:t(s).description_en,"onUpdate:modelValue":e[4]||(e[4]=o=>t(s).description_en=o),label:"Description (en)"},null,8,["modelValue"]),r(k,{class:"mt-1",message:t(s).errors.description_en},null,8,["message"])]),a("div",null,[r(h,{modelValue:t(s).description_fr,"onUpdate:modelValue":e[5]||(e[5]=o=>t(s).description_fr=o),label:"Description (fr)"},null,8,["modelValue"]),r(k,{class:"mt-1",message:t(s).errors.description_fr},null,8,["message"])]),a("div",null,[r(h,{modelValue:t(s).description_de,"onUpdate:modelValue":e[6]||(e[6]=o=>t(s).description_de=o),label:"Description (de)"},null,8,["modelValue"]),r(k,{class:"mt-1",message:t(s).errors.description_de},null,8,["message"])]),d.value.length>0?(_(),w("div",ne,[(_(!0),w(D,null,Z(d.value,o=>(_(),w("div",ie,[a("div",{onClick:ve=>I(o.id),class:"absolute top-2 right-2 bg-red-500 rounded-full p-1 cursor-pointer hover:scale-105"},me,8,de),R(a("img",{src:o.url,alt:"image"},null,8,pe),[[t(q)]])]))),256))])):z("",!0),r(t(L),{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=o=>v.value=o),title:"Delete image",onClose:e[8]||(e[8]=o=>P())},{footer:n(({close:o})=>[r(t(p),{onClick:o,color:"danger",class:"mr-2",outline:""},{default:n(()=>[m(" Cancel ")]),_:2},1032,["onClick"]),r(t(p),{onClick:B},{default:n(()=>[m(" Confirm ")]),_:1})]),default:n(()=>[ce]),_:1},8,["modelValue"]),r(t(j),{class:X({"cursor-pointer":i.value>0,"cursor-no-drop":i.value<=0,"mb-0":!0}),name:"image",ref:"pond","label-idle":"Drop images here... Max: "+i.value,"accepted-file-types":"image/jpeg, image/png, image/jpg","allow-multiple":!0,maxFiles:i.value,disabled:i.value<=0,required:i.value>=C,onInitfile:e[9]||(e[9]=o=>b(!0)),onProcessfilestart:e[10]||(e[10]=o=>b(!0)),onProcessfiles:e[11]||(e[11]=o=>b(!1)),server:{process:{url:"/en/upload-tmp",method:"POST",onload:$},revert:O,headers:{"X-CSRF-TOKEN":l.$page.props.csrf_token}}},null,8,["class","label-idle","maxFiles","disabled","required","server"]),r(t(p),{type:"submit",disabled:t(s).processing||x.value||!t(s).isDirty,block:""},{default:n(()=>[m(" Save ")]),_:1},8,["disabled"])],40,re)]),_:1},8,["modelValue"])],64)}}};export{Ve as default};
